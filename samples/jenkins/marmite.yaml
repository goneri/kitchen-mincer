description: A Jenkins restart scenario

# an account on an OpenStack cloud providing Heat API.
environments:
  devtest:
# Implicite, heat is the default provider.
#    provider: heat
    logdispatchers:
      -
        name: pylogger
        driver: pylogger
      -
        name: local
        driver: directory
        path: .
      -
        name: swift-ci
        driver: swift
        container: log
        path_template: 'my/log/$name'

application:
  # Name of the application, Stack will be called according to this name
  name: jenkins

  medias:
    jenkins_image:
        type: local
        disk_format: qcow2
        path: samples/jenkins/jenkins_image.qcow2
    base_image:
        type: local
        disk_format: qcow2
        path: samples/jenkins/base_image.qcow2

  scenario:
#  -
#    description: generate the images
#    driver: local_script
#    work_dir: 'samples/jenkins/'
#    command: ./build_image.sh
  -
    description: prepare environment
    driver: start_infra
    params:
  -
    description: test_simple
    driver: simple_check
    commands:
      - ping -c5 $jenkins_instance
      - curl -I $jenkins_instance:8080
