description: A Jenkins

# an account on an OpenStack cloud providing Heat API.
environments:
  devtest:
# Implicite, heat is the default provider.
#    provider: heat
    key_pairs:
      stack_os_ci-test7: |
        ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCyiXfE1zHKdj6odbysr917Cn88ov0VQaPJtLKJyMNuRYAeMOFQHd50X8JO4dfZbmSo3YdJlVfz9FLRxE64mqj9bkN8hPFbkTG2F1AWXGPON5cmm4uiLPfQkWhX/LnClrhzZpNtMJYs5AEFeDs0POijcRugZsQA+wvLi0lSlhOfkqtjAJKpPUwy1wrJFDdvqdQBjpNQh/LB8c15XfQV2JT/3NX26dQe8zvHhL6NvfhBnAikodYkBr7UjSl36CBk0cPebZMZEBBiHdo76xORVkpmqDvkhFByXXeAsvRa2YWS4wxpiNJFswlRhjubGau7LrT113WMcPvgYXHYHf2IYJWD goneri.lebouder@enovance.com
    logdispatchers:
      -
        name: local
        driver: directory
        path: .
      -
        name: swift-ci
        driver: swift
        container: log
        path_template: 'my/log/$name'
      -
        name: other-swift
        driver: swift
        container: robert
        path_template: 'somewhere/$name'
        identity:
          user: admin
          key: password
          authurl: http://os-ci-test7.ring.enovance.com:5000/v2.0
          tenant_name: demo

application:
  # Name of the application, Stack will be called according to this name
  name: jenkins

  medias:
    jenkins_image:
        type: local
        disk_format: qcow2
        path: samples/jenkins/jenkins_debian.qcow2
    base_image:
        type: local
        disk_format: qcow2
        path: samples/jenkins/base_image.qcow2

  scenario:
    -
      description: prepare the marmite
      driver: local_script
      params:
        work_dir: ./samples/spinal-stack/
        command: ls
    -
      description: prepare environment
      driver: start_infra
      params:
    -
      description: test_simple
      driver: simple_check
      params:
        _ALL_:
          ping -c5 $IP
